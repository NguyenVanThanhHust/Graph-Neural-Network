FROM pytorch/pytorch:1.13.1-cuda11.6-cudnn8-devel
RUN pip install opencv-python einops matplotlib jpeg4py \
        tqdm timm pyyaml yacs easydict tensorboardX
RUN apt-get update && apt-get -y install libgl1 libssl-dev
RUN apt-get update -y && apt install -y build-essential libglib2.0-0 git vim fish
RUN python -m pip install scipy Pillow pandas scikit-image seaborn scipy cmake

RUN python -m pip install pytorch-lightning pybind11 albumentations

WORKDIR /opt/
RUN  git clone --recurse-submodules https://github.com/dmlc/dgl.git
WORKDIR /opt/dgl/build
RUN cmake -DUSE_CUDA=ON .. && make -j2
WORKDIR /opt/dgl/python
RUN python setup.py install 

RUN pip install pyg-lib torch-scatter torch-sparse torch-cluster torch-spline-conv torch-geometric -f https://data.pyg.org/whl/torch-1.13.0+cu116.html

WORKDIR /workspace/
